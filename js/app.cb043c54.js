(function(e){function t(t){for(var i,o,s=t[0],u=t[1],c=t[2],l=0,h=[];l<s.length;l++)o=s[l],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);d&&d(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],i=!0,s=1;s<r.length;s++){var u=r[s];0!==n[u]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var i={},n={app:0},a=[];function o(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=i,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(r,i,function(t){return e[t]}.bind(null,i));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/KKDAY-Homework/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=u;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"07f1":function(e,t,r){"use strict";r("e6e9")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("VStory",{attrs:{imageUrl:e.activeStory.imageUrl,text:e.activeStory.text,loading:e.loading,total:e.total,activeIndex:e.activeStoryIndex,duration:e.duration,isHoldStory:e.isHoldStory,error:e.showRetry},on:{touchstart:function(t){return t.preventDefault(),e.pause(t)},touchend:function(t){return t.preventDefault(),e.resume(t)},mousedown:function(t){return t.preventDefault(),e.pause(t)},mouseup:function(t){return t.preventDefault(),e.resume(t)},retry:e.retry}})],1)},a=[],o=r("1da1"),s=(r("159b"),r("4de4"),r("7db0"),r("96cf"),r("d3b7"),r("d81d"),[{id:"84b496feea04306e1bf8ec5ff8e72a60",imageUrl:"https://i.imgur.com/XgJFuRN.jpg",text:"1. Top Things To Do In Ooty",duration:3e3,weight:1},{id:"1cc6936b3c62dfbf138dec9a231d178b",imageUrl:"https://i.imgur.com/Uvo0Rz1.jpg",text:"2. Surrounded by the Nilgiris and stunning lakes and forests, the resort town of Ooty in Tamil Nadu is a popular getaway in South India",duration:4e3,weight:2},{id:"4705c2d04b9ea2a5ce13ef95f529f9f5",imageUrl:"https://i.imgur.com/Z7pPmw3.jpg",text:"3. A fun way to explore this hill station is to hop on a toy train that will take you across the countryside",duration:5e3,weight:3},{id:"727f86e4427f39efcd58ee8e08db05ee",imageUrl:"https://i.imgur.com/fHQjxkO.jpg",text:"4. Once a British Raj summer resort, you can still find Colonial influences in Ooty's many historical buildings such as St. Stephen's Church",duration:3e3,weight:1},{id:"2228d31bf9cf093b8bdd1af6a31abe40",imageUrl:"https://i.imgur.com/yK81VNq.jpg",text:"5. Ooty Lake is a must-visit to enjoy a peaceful boat ride. A major tourist attraction, this artificial lake was constructed in 1824",duration:4e3,weight:2},{id:"2709468982b65ccefca7f8c9b93386fa",imageUrl:"https://i.imgur.com/eyjQqfO.jpg",text:"6. To surround yourself with beauty, head to Ooty's Rose Garden in Vijayanagaram, which is the largest rose garden in India",duration:5e3,weight:3},{id:"7eb2f186e81e3a62f79073922c8f92e5",imageUrl:"https://i.imgur.com/JmDbu3a.jpg",text:"7. If Rose Garden is not enough, then explore the Botanical Garden that houses a wide range of exotic and indigenous plants, shrubs, trees",duration:3e3,weight:1},{id:"8ba13af5525e1f087cb98fe47fe0bcc8",imageUrl:"https://i.imgur.com/WAR0oOy.jpg",text:"8. About 28km away from Ooty town is the stunning Avalanche Lake. Trek around to explore the region and enjoy a picnic by the lake",duration:4e3,weight:2},{id:"4b64ead14354d4d21e8793cc7e6941d0",imageUrl:"https://i.imgur.com/lAZQ7JW.jpg",text:"9. While there are many treats to indulge in, you cannot miss picking a range of delicious hand-made Ooty chocolates",duration:4e3,weight:3},{id:"2f24a80a2110029153151fadbb54f585",imageUrl:"https://i.imgur.com/E8OBfBA.jpg",text:"10. Delhi is home to some of the finest monuments with Islamic architecture like Humayun's Tomb and Qutub Minar",duration:3e3,weight:1},{id:"d139d287966901328fd0e2eec348996b",imageUrl:"https://i.imgur.com/wsBg4T9.jpg",text:"11. Delhi is famous for its street food culture with lip smacking delicacies like aloo tikkis, papdi chaat and many more ",duration:3e3,weight:2},{id:"1217eb1e172df4fefbedd29581696287",imageUrl:"https://i.imgur.com/9gen3pL.jpg",text:"12. Connaught Place is truly the heart of Delhi that still carries old-school charm with famous shops and restaurants around ",duration:4e3,weight:3},{id:"116be6e8523f60ed7c51e56e846df10e",imageUrl:"https://i.imgur.com/vSFWZ4k.jpg",text:"13. Delhi is the perfect example of an urban jungle with a buzzing nightlife that will enthrall you with some foot-tapping music ",duration:5e3,weight:1},{id:"9caaee5aaaff6a014b9c9e8116a15d85",imageUrl:"https://i.imgur.com/s5xDvCJ.jpg",text:"14. The city houses a mix of many sacred spots like the famous Bangla Sahib Gurudwara and Jama Masjid that are worth a visit ",duration:3e3,weight:2},{id:"5bdfce6d231b54499dfced7846de3855",imageUrl:"https://i.imgur.com/zG9lImF.jpg",text:"15. In the midst of a concrete jungle, Delhi is blessed with green hotspots like Lodi Gardens and The Garden Of Five Senses for a nature stroll ",duration:5e3,weight:3}]);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=1e3*(e+Math.random()*(t-e));return new Promise((function(e){return setTimeout(e,r)}))}function c(e,t){t?console.log("[API-CALL] ".concat(e),t):console.log("[API-CALL] ".concat(e))}function d(){return c("getStoriesMeta"),{length:s.length,idList:s.map((function(e){return e.id})),weightList:s.map((function(e){return e.weight}))}}function l(e){return h.apply(this,arguments)}function h(){return h=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c("ajaxGetStoryByIndex",{index:t}),e.next=3,u(1,2);case 3:if(!(Math.random()<.5)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",s[t]);case 6:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}var m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._g({staticClass:"story"},e.$listeners),[r("div",{staticClass:"story__wrapper",style:{backgroundImage:"url("+e.imageUrl+")"}},[r("div",{staticClass:"story__header"},e._l(e.total,(function(t,i){return r("div",{key:t,staticClass:"story__header-tile",class:{"story__header-tile--readed":e.activeIndex>i}},[r("div",{staticClass:"story__header-tile-fill",class:{"story__header-tile-fill--active":i===e.activeIndex},style:{"animation-duration":e.duration/1e3+"s","animation-play-state":e.loading||e.isHoldStory?"paused":"running"}})])})),0),r("div",{staticClass:"story__text"},[e._v(" "+e._s(e.text)+" ")]),r("div",{staticClass:"story__left"}),r("div",{staticClass:"story__right"}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"story__loading"},[e._v(" Loading... ")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"story__retry",on:{pointerdown:function(t){return e.$emit("retry")}}},[e._v(" Click to Reload ")])])])},f=[],g=(r("a9e3"),{props:{error:{type:Boolean},imageUrl:{type:String,default:""},text:{type:String,default:""},loading:{type:Boolean,default:!1},total:{type:Number},activeIndex:{type:Number},duration:{type:Number},isHoldStory:{type:Boolean}},data:function(){return{}}}),p=g,y=(r("07f1"),r("2877")),w=Object(y["a"])(p,m,f,!1,null,"7958ae32",null),v=w.exports,x={name:"App",components:{VStory:v},data:function(){return{activeStoryIndex:-1,loading:!1,total:0,activeStory:{},startTime:0,duration:1e3,lessTime:0,isHoldStory:!1,elapsedTime:0,startHoldTime:0,showRetry:!1,stories:[],storyId:0}},computed:{hasNotNextStory:function(){return this.activeStoryIndex+1>this.total-1},hasNotPrevStory:function(){return this.activeStoryIndex-1<0}},methods:{retry:function(){this.showRetry=!1,this.changeImageByIndex(this.storyId)},pause:function(e){e.target.classList.contains("story__loading")||e.target.classList.contains("story__retry")||!this.timer||(this.startHoldTime=(new Date).getTime(),this.elapsedTime=this.startHoldTime-this.startTime,this.lessTime=this.duration-this.elapsedTime,this.isHoldStory=!0,window.clearTimeout(this.timer))},resume:function(e){var t=this;if(!e.target.classList.contains("story__loading")&&!e.target.classList.contains("story__retry")){var r=(new Date).getTime();if(this.isHoldStory=!1,r-this.startHoldTime<300)return e.target.classList.contains("story__left")&&this.prevImage(),void(e.target.classList.contains("story__right")&&this.nextImage());this.startTime=r-this.elapsedTime,this.timer=window.setTimeout((function(){return t.nextImage()}),this.lessTime)}},createNextPageCountdown:function(e){var t=this;this.timer&&window.clearTimeout(this.timer),this.elapsedTimer&&window.clearInterval(this.elapsedTimer),this.duration=e,this.startTime=(new Date).getTime(),this.timer=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.hasNotNextStory){e.next=2;break}return e.abrupt("return");case 2:return t.storyId=t.getRandomIndex(),t.activeStoryIndex++,e.next=6,t.changeImageByIndex(t.storyId);case 6:case"end":return e.stop()}}),e)}))),e)},changeImageByIndex:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.timer&&window.clearTimeout(t.timer),r.next=3,t.getStoryByIndex(e);case 3:if(i=r.sent,i){r.next=7;break}return t.showRetry=!0,r.abrupt("return",!1);case 7:n=i.duration,t.createNextPageCountdown(n);case 9:case"end":return r.stop()}}),r)})))()},prevImage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.hasNotPrevStory){t.next=2;break}return t.abrupt("return");case 2:return e.activeStoryIndex--,e.storyId=e.stories[e.activeStoryIndex].idx,t.next=6,e.changeImageByIndex(e.storyId);case 6:case"end":return t.stop()}}),t)})))()},nextImage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.hasNotNextStory){t.next=2;break}return t.abrupt("return");case 2:return e.activeStoryIndex++,r=(e.stories[e.activeStoryIndex]||{}).idx,void 0===r&&(r=e.getRandomIndex()),e.storyId=r,t.next=8,e.changeImageByIndex(e.storyId);case 8:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,i,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=6,i=d(),n=i.length,a=i.weightList,e.total=Math.min(n,r),e.weightTable=[],a.forEach((function(t,r){for(var i=0;i<t;i++)e.weightTable.push(r)})),e.storyId=e.getRandomIndex(),e.activeStoryIndex++,t.next=9,e.changeImageByIndex(e.storyId);case 9:case"end":return t.stop()}}),t)})))()},getRandomIndex:function(){var e=Math.floor(Math.random()*this.weightTable.length),t=this.weightTable[e];return this.weightTable=this.weightTable.filter((function(e){return e!==t})),t},getStoryByIndex:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.loading=!0,!t.stories.find((function(t){return t.idx===e}))){r.next=5;break}i=t.stories[t.activeStoryIndex],r.next=12;break;case 5:return r.next=7,l(e);case 7:if(i=r.sent,i){r.next=10;break}return r.abrupt("return",!1);case 10:i.idx=e,t.stories.push(i);case 12:return t.activeStory=i,t.loading=!1,r.abrupt("return",t.activeStory);case 15:case"end":return r.stop()}}),r)})))()}},mounted:function(){this.init()},beforeDestroy:function(){window.clearTimeout(this.timer)}},b=x,I=(r("034f"),Object(y["a"])(b,n,a,!1,null,null,null)),_=I.exports;i["a"].config.productionTip=!1,document.dispatchEvent(new Event("vue-ready")),new i["a"]({render:function(e){return e(_)}}).$mount("#app")},"85ec":function(e,t,r){},e6e9:function(e,t,r){}});
//# sourceMappingURL=app.cb043c54.js.map